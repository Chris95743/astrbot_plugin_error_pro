{
    "block_error_messages": {
        "description": "是否屏蔽错误信息（阻止发送给用户）",
        "type": "bool",
        "default": true
    },
    "notify_admin": {
        "description": "是否将错误信息发送给管理员",
        "type": "bool",
        "default": false
    },
    "enable_ai_explanation": {
        "description": "启用AI错误解释",
        "type": "bool",  
        "hint": "启用后会调用AI生成上下文感知的友好错误解释，替代冰冷的错误信息",
        "default": false
    },
    "ai_base_url": {
        "description": "AI API基础URL",
        "type": "string",
        "hint": "OpenAI兼容的API基础URL，例如：https://api.openai.com/v1",
        "default": "https://api.siliconflow.cn"
    },
    "ai_api_key": {
        "description": "AI API密钥",
        "type": "string", 
        "hint": "用于调用AI服务的API密钥",
        "obvious_hint": true,
        "default": ""
    },
    "ai_model": {
        "description": "AI模型名称",
        "type": "string",
        "hint": "使用的AI模型名称，例如：deepseek-ai/DeepSeek-V3",
        "default": "deepseek-ai/DeepSeek-V3"
    },
    "ai_prompt": {
        "description": "AI提示词模板",
        "type": "string",
        "hint": "支持变量：{error}错误信息，{user_message}用户消息，{user_name}用户名称，{platform}平台名称，{chat_type}聊天类型",
        "default": "用户{user_name}在{platform}的{chat_type}中说了：\"{user_message}\"，但是出现了错误：{error}。请用亲切友好的语言先回答用户说的话，再简单的向用户解释出现了什么错误。称呼用户为主人，不要输出你的心理活动，同一报错的解释不要重复。"
    },
    "ai_timeout": {
        "description": "AI调用超时时间（秒）",
        "type": "int",
        "hint": "AI服务调用的超时时间，超时后将使用原错误处理方式",
        "default": 10
    },
    "ai_max_tokens": {
        "description": "AI响应最大Token数",
        "type": "int",
        "hint": "AI生成响应的最大Token数量，控制响应长度",
        "default": 500
    },
    "block_ai_explanation_and_send_admin": {
        "description": "屏蔽AI生成的错误解释并发送给管理员",
        "type": "bool",
        "hint": "开启后当AI生成了解释时，不再发送给用户，而是只发给管理员。",
        "default": false
    },
    "retry_enable": {
        "description": "启用简化重试（先在当前Provider上重试，失败后再考虑切换）",
        "type": "bool",
        "default": false
    },
    "retry_max_attempts": {
        "description": "简化重试的最大次数（同一Provider）",
        "type": "int",
        "default": 2
    },
    "retry_delay": {
        "description": "简化重试的间隔（秒），采用指数退避，上限30秒",
        "type": "int",
        "default": 2
    },
    "retry_error_keywords": {
        "description": "触发简化重试的错误关键词",
        "type": "string",
        "invisible": true,
        "default": ""
    },
    "retry_error_keywords_list": {
        "description": "触发简化重试的错误关键词列表",
        "type": "list",
        "hint": "每个元素为一个关键词，采用包含匹配（不区分大小写）",
        "default": ["错误类型"]
    },
    "retry_fail_message": {
        "description": "重试全部失败后的用户提示",
        "type": "string",
        "hint": "当简化重试全部失败且未触发临时切换时，给用户的一句友好提示，留空则不回复",
        "default": "抱歉，我已尝试重试但仍未成功，请稍后再试。最后一次重试错误: {last_error_info}"
    },
    "block_retry_fail_and_send_admin": {
        "description": "屏蔽重试失败提示并发送给管理员",
        "type": "bool",
        "hint": "开启后，重试失败生成的提示不再发送给用户，而是仅发送给管理员。",
        "default": false
    },
    "auto_switch_on_retry_fail": {
        "description": "重试失败后自动切换Provider",
        "type": "bool",
        "hint": "开启后，当重试全部失败时会自动切换到指定的备用Provider",
        "default": false
    },
    "switch_provider_id": {
        "description": "触发后切换到的Provider ID",
        "type": "string",
        "hint": "需与已启用的提供商ID一致",
        "default": ""
    },
    "switch_revert_seconds": {
        "description": "延时切回的秒数，-1 表示不切回",
        "type": "int",
        "default": -1
    },
    "switch_block_message": {
        "description": "触发时是否拦截当次输出",
        "type": "bool",
        "default": true
    },
    "switch_retry_reply_enable": {
        "description": "切换后立即用新Provider重试并回复原始用户消息",
        "type": "bool",
        "default": true
    },
    "switch_notify_admin": {
        "description": "临时切换服务提供商后是否通知管理员",
        "type": "bool",
        "hint": "开启后，每次关键词触发并完成切换都会向管理员私聊发送一条通知",
        "default": false
    },
    "enable_completion_check": {
        "description": "启用#结束#标记检测",
        "type": "bool",
        "hint": "开启后，如果AI回复中没有#结束#标记，将视为错误并触发处理。发送时会自动删除#结束#标记",
        "default": false
    },
    "completion_check_retry_enable": {
        "description": "缺少#结束#标记时是否启用重试",
        "type": "bool",
        "hint": "开启后，当检测到缺少#结束#标记时会先尝试重试。关闭时直接进入切换Provider或失败提示",
        "default": false
    },
    "inject_completion_prompt": {
        "description": "自动注入#结束#标记提示到人设",
        "type": "bool",
        "hint": "开启后会自动将#结束#标记的要求注入到AI人设中，无需手动修改人设",
        "default": false
    },
    "completion_prompt_text": {
        "description": "注入的#结束#标记提示内容",
        "type": "string",
        "hint": "自定义注入到人设中的提示内容",
        "default": "你的回复结束必须在末尾加上#结束#，否则系统将会判定你的回复无效。这个要求十分重要!!!"
    }
}
